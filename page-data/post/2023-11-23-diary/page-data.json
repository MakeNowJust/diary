{"componentChunkName":"component---src-templates-post-js","path":"/post/2023-11-23-diary/","result":{"data":{"site":{"siteMetadata":{"title":"℘ make now just"}},"markdownRemark":{"html":"<h1>やったこと</h1>\n<h2>MD</h2>\n<p>神碑を擦っていたら無限に負け続けていた。<br>\n自分は神碑の才能が無いのだと思う。</p>\n<h2>Prism</h2>\n<p>デフォルト引数のところで現在定義中の名前を使うとCRubyだとそれを検出してくれるらしいので、それを実装した。<br>\n正直 <code>pm_parser_t</code> に新しいフィールドを追加してまでやることなのかはよく分からない。</p>\n<p><a href=\"https://github.com/ruby/prism/pull/1916\" class=\"embedly-card\">https://github.com/ruby/prism/pull/1916</a></p>\n<p>あと、デフォルト引数がネストしてると検出できないよなぁとか思ったりした。<br>\nちなみにその場合は <code>nil</code> になるらしい。壊れるかと思ったのに残念。</p>\n<pre><code class=\"hljs language-console\"><span class=\"hljs-meta prompt_\">$ </span><span class=\"bash\">ruby -e <span class=\"hljs-string\">'def foo(&#x26;block) = block.call; def bar(baz = foo { |fuzz = baz| fuzz }) = baz; p bar'</span></span>\nnil</code></pre>\n<p>どうでもいいけどCRubyだとこっちもエラーにならない。<br>\nパラメーターを消すとエラーが出るのでネストを考慮してないっぽい。<br>\n報告すべきか‥‥。</p>\n<pre><code class=\"hljs language-console\"><span class=\"hljs-meta prompt_\">$ </span><span class=\"bash\">ruby -e <span class=\"hljs-string\">'def foo(&#x26;block) = block.call; def bar(baz = foo { |fuzz = baz| baz }) = baz; p bar'</span></span>\nnil</code></pre>","fields":{"date":"2023-11-23"},"frontmatter":{"title":"神碑を擦っていた"},"excerpt":"やったこと MD 神碑を擦っていたら無限に負け続けていた。 自分は神碑の才能が無いのだと思う。 Prism デフォルト引数のところで現在定義中の名前を使うとCRubyだとそれを検出してくれるらしいので、それを実装した。 正直 pm_parser_t に新しいフィールドを追加して…"},"prev":{"fields":{"date":"2023-11-24","slug":"/post/2023-11-24-diary/"},"frontmatter":{"title":"エンダーエンダー最終日"}},"next":{"fields":{"date":"2023-11-22","slug":"/post/2023-11-22-diary/"},"frontmatter":{"title":"風邪気味だった"}}},"pageContext":{"slug":"/post/2023-11-23-diary/","prevSlug":"/post/2023-11-24-diary/","nextSlug":"/post/2023-11-22-diary/"}},"staticQueryHashes":["1213933803","2548877431"],"slicesMap":{}}