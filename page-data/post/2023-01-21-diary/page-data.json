{"componentChunkName":"component---src-templates-post-js","path":"/post/2023-01-21-diary/","result":{"data":{"site":{"siteMetadata":{"title":"℘ make now just"}},"markdownRemark":{"html":"<h1>やったこと</h1>\n<h2>Ecoji</h2>\n<p><code>ruby.wasm</code> を使ってブラウザで動くデモを作った。</p>\n<p><a href=\"https://makenowjust.github.io/ecoji.rb/\" class=\"embedly-card\">https://makenowjust.github.io/ecoji.rb/</a></p>\n<p>とりあえず動いている。</p>\n<p>Gemのファイルを <code>memfs</code> に追加して <code>preopens</code> で指定しても、なぜか <code>Function not implemented</code> と出て読み込めなかったので、<code>wasi-vfs</code> を使って追加して読み込むようにした。<br>\nファイル自体は読み込めるので、<code>require</code> を <code>eval</code> と <code>File.read</code> に置き換えればいけなくもないのだけど、あまりに強引な気がするのでやめておくことにした。<br>\n<code>wasi-vfs</code> を使う場合も、ルートディレクトリ直下にしないと Ruby 側が上のディレクトリをトラバースしようとしてエラーになるので注意。<br>\nこれは <code>memfs</code> 側に上の階層のディレクトリを追加しておけば直りそうな気もする。</p>\n<p>JavaScriptに埋め込んでしまっているけど、いい感じに分割にしてほしさがある。<br>\nどうにかならないものか。</p>\n<p>何はともあれやりたいことはできたので満足。</p>","fields":{"date":"2023-01-21"},"frontmatter":{"title":"Ecoji.rbのブラウザで動くデモを作った"},"excerpt":"やったこと Ecoji ruby.wasm を使ってブラウザで動くデモを作った。 https://makenowjust.github.io/ecoji.rb/ とりあえず動いている。 Gemのファイルを memfs に追加して preopens で指定しても、なぜか Func…"},"prev":{"fields":{"date":"2023-01-22","slug":"/post/2023-01-22-diary/"},"frontmatter":{"title":"ruby.wasmの記事を書いた"}},"next":{"fields":{"date":"2023-01-20","slug":"/post/2023-01-20-diary/"},"frontmatter":{"title":"ruby.wasmとたわむれていた"}}},"pageContext":{"slug":"/post/2023-01-21-diary/","prevSlug":"/post/2023-01-22-diary/","nextSlug":"/post/2023-01-20-diary/"}},"staticQueryHashes":["530032413"],"slicesMap":{}}