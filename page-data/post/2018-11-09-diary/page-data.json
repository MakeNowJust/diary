{"componentChunkName":"component---src-templates-post-js","path":"/post/2018-11-09-diary/","webpackCompilationHash":"1ffa88a025b86f3bfeb3","result":{"data":{"site":{"siteMetadata":{"title":"℘ make now just"}},"markdownRemark":{"html":"<h1>やったこと</h1>\n<h2>mdx-deck</h2>\n<p><del>直そうと努力はしているが無理な気がする。そもそもルーターと独立させつつ、ヒストリを扱うのが難しい。最低限のAPIだけ持ったオブジェクトを<code>history</code>プロパティとして渡す、とかが無難なんだろうか‥‥。</del></p>\n<p>URLが変わったときにルーターが<code>componentDidUpdate</code>をトリガーするのが問題だと理解したので、ラッパーを<code>PureComponent</code>で包んだら動くようになった。これで問題が起こるようなスライドは作らないと思うので、これでいいような気がする。<br>\n<code>React.memo</code>でもいいっぽい。</p>\n<p>これでようやく先に進める‥‥。</p>\n<h2>Crystalの<code>JSON</code>で、<code>Hash</code>内の<code>null</code>が無視される</h2>\n<p><a href=\"https://github.com/crystal-lang/crystal/issues/7052\" class=\"embedly-card\">https://github.com/crystal-lang/crystal/issues/7052</a></p>\n<p>調べたところ確かにそういう実装になってる。</p>\n<p><a href=\"https://github.com/crystal-lang/crystal/commit/5312eed11065fa626474d996602b2303d863b3f1\" class=\"embedly-card\">https://github.com/crystal-lang/crystal/commit/5312eed11065fa626474d996602b2303d863b3f1</a></p>\n<p>が、なぜそんなことをしたのか全く分からない。<del>普通に考えて、勝手にスキップされても誰も嬉しくないと思う。</del></p>\n<p>どうも<code>Union</code>に対する<code>JSON</code>の変換ができない時代の実装だったらしい。なるほど。</p>\n<p>とりあえずPull Requestを作った。</p>\n<p><a href=\"https://github.com/crystal-lang/crystal/pull/7053\" class=\"embedly-card\">https://github.com/crystal-lang/crystal/pull/7053</a></p>\n<p>さくっとマージされた。なんでこういうのは早いのか‥‥。</p>\n<h2><code>crystal docs</code>の修正</h2>\n<p><a href=\"https://github.com/crystal-lang/crystal/pull/7054\" class=\"embedly-card\">https://github.com/crystal-lang/crystal/pull/7054</a></p>\n<p><a href=\"https://github.com/crystal-lang/crystal/pull/7056\" class=\"embedly-card\">https://github.com/crystal-lang/crystal/pull/7056</a></p>\n<p>数日前に実装したまま放置してたやつ。テストを書いてなかったのもあるけど、新MacBook Airを開く余裕が無かったというのもある。<br>\nこの手のテストを書くのはめんどい。</p>","fields":{"date":"2018-11-09"},"frontmatter":{"title":"crystal docsを直してた"},"excerpt":"やったこと mdx-deck 直そうと努力はしているが無理な気がする。そもそもルーターと独立させつつ、ヒストリを扱うのが難しい。最低限のAPIだけ持ったオブジェクトをhistoryプロパティとして渡す、とかが無難なんだろうか‥‥。 URLが変わったときにルーターがcompone…"},"prev":{"fields":{"date":"2018-11-10","slug":"/post/2018-11-10-diary/"},"frontmatter":{"title":"家で休んでいた"}},"next":{"fields":{"date":"2018-11-08","slug":"/post/2018-11-08-diary/"},"frontmatter":{"title":"mdx-deckなんも分からん"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/post/2018-11-09-diary/","prevSlug":"/post/2018-11-10-diary/","nextSlug":"/post/2018-11-08-diary/"}}}