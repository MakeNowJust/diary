{"componentChunkName":"component---src-templates-post-js","path":"/post/2024-03-20-diary/","result":{"data":{"site":{"siteMetadata":{"title":"℘ make now just"}},"markdownRemark":{"html":"<h1>やったこと</h1>\n<h2>diary</h2>\n<p>そろそろ<code>src/posts</code>ディレクトリのファイル数が多くなりすぎて微妙な気がしているので、階層を入れられるようにしたい。<br>\n当初はこんなに続けると思わなかったしなぁ。</p>\n<h2>Miranda</h2>\n<p>そういえばPPLでakrさんに「Mirandaには昔unfree algebraがあった」という話を聞いたのでソースを探してみた。</p>\n<p>自然数の定義を<code>zero | succ(n) | pred(n)</code>としたときに<code>succ(pred(n))</code>のような値を<code>n</code>に自動で変換する規則を導入できる型らしい。<br>\nデータ構造に規則があるからfreeではなくunfree algebraらしい。</p>\n<p>この辺が出典の気がする。</p>\n<blockquote>\n<p>Turner, David A. \"Miranda: A non-strict functional language with polymorphic types.\" Conference on Functional Programming Languages and Computer Architecture. Berlin, Heidelberg: Springer Berlin Heidelberg, 1985.</p>\n<p><a href=\"https://www.cs.kent.ac.uk/people/staff/dat/miranda/nancypaper.pdf\" class=\"embedly-card\">https://www.cs.kent.ac.uk/people/staff/dat/miranda/nancypaper.pdf</a></p>\n</blockquote>\n<p><strong>Unfree algebras</strong>という章があって、そこに確かに次のような記述があった。</p>\n<pre><code class=\"hljs language-haskell\"><span class=\"hljs-title\">int</span> ::= <span class=\"hljs-type\">Zero</span> | <span class=\"hljs-type\">Suc</span> int | <span class=\"hljs-type\">Pred</span> int\n\n...\n\n<span class=\"hljs-type\">Suc</span> (<span class=\"hljs-type\">Pred</span> n) => n\n<span class=\"hljs-type\">Pred</span> (<span class=\"hljs-type\">Suc</span> n) => n</code></pre>\n<p>なるほど。</p>\n<h2>Scala</h2>\n<p>過去にHaskellの<a href=\"https://hackage.haskell.org/package/data-reify\"><code>data-reify</code></a>をScalaで実装した気がするのだけど、どうも公開していないっぽいのでもう一度考えている。<br>\n別に難しくはない。</p>\n<p>とりあえず実装してみた。</p>\n<p><a href=\"https://gist.github.com/makenowjust/0db9575569956b079305762cfd6f16fb\" class=\"embedly-card\">https://gist.github.com/makenowjust/0db9575569956b079305762cfd6f16fb</a></p>\n<p><code>MuRef</code>は <code>Applicative + Traverse + Coalgebra</code> なはずなので、そういう気持ちで書いた。</p>","fields":{"date":"2024-03-20"},"frontmatter":{"title":"data-reifyを実装していた"},"excerpt":"やったこと diary そろそろsrc/postsディレクトリのファイル数が多くなりすぎて微妙な気がしているので、階層を入れられるようにしたい。 当初はこんなに続けると思わなかったしなぁ。 Miranda そういえばPPLでakrさんに「Mirandaには昔unfree alg…"},"prev":{"fields":{"date":"2024-03-21","slug":"/post/2024-03-21-diary/"},"frontmatter":{"title":"スライドが完成した"}},"next":{"fields":{"date":"2024-03-19","slug":"/post/2024-03-19-diary/"},"frontmatter":{"title":"スライドを作っていた"}}},"pageContext":{"slug":"/post/2024-03-20-diary/","prevSlug":"/post/2024-03-21-diary/","nextSlug":"/post/2024-03-19-diary/"}},"staticQueryHashes":["1213933803","2548877431"],"slicesMap":{}}