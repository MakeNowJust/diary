{"componentChunkName":"component---src-templates-post-js","path":"/post/2020-04-13-diary/","result":{"data":{"site":{"siteMetadata":{"title":"℘ make now just"}},"markdownRemark":{"html":"<h1>やったこと</h1>\n<h2>Crystal</h2>\n<p>網羅性チェックのエラー化。<br>\n来たわね、という感じ。どうなるんだろう‥‥。<br>\n完全に話が付いてる感じでもないと思うんだよな。</p>\n<p><a href=\"https://github.com/crystal-lang/crystal/pull/9045\" class=\"embedly-card\">https://github.com/crystal-lang/crystal/pull/9045</a></p>\n<p><code>RegexLiteral#to_s</code>のやつ。<br>\nRX14に<code>%r</code>に対応したエスケープの処理を書けばよくない、と言われているのだけど、それは以下の理由で無理だと思う。</p>\n<ul>\n<li>ほとんどのデリミタ(<code>&#x3C;...></code>は除く)は正規表現的に意味があるので、単純にバックスラッシュでエスケープできない。仮にレキサも修正して、そういうエスケープができるようにする(つまり<code>%r(...)</code>内では<code>\\(</code>を<code>(</code>と扱うようにする)と、二重エスケープの問題が生じてかなりややこしくなってしまう。</li>\n<li><code>&#x3C;...></code>の場合はそういった問題は生じないけれど、エスケープされたデリミタを元の文字として扱うため(<code>\\&#x3C;</code>を<code>&#x3C;</code>、<code>\\></code>を<code>></code>とするため)に、結局レキサの修正は必要になる。つまり<a href=\"https://github.com/crystal-lang/crystal/issues/9016#issuecomment-612617893\">コメント</a>の最初のアイディアと本質的に変わらない。そういう意味では、空白のエスケープを特殊扱いする方が理解しやすい仕様だと思う。(実際、空白文字はCrystalのシンタックス上も意味を持つ文字なので、Crystalのレベルで処理するのは合理的)</li>\n</ul>\n<p>他のアイディアとして、文字クラス中ではリテラルのデリミタを無視する、という方法がある。このようにすれば<code>%r(...)</code>を使った場合に上手く機能するんじゃないかと思う。けれど、この方法を実装するのはやや複雑だし(少なくとも新しいフィールドを<code>DelimiterState</code>に追加する必要がある)、interpolationのことも考慮すると、この実装が全く問題がないとは言い切れない気がする。</p>\n<p>あとは、エスケープが必要な文字をinterpolationにしてしまう、という方法もあるけど、これは流石に微妙かなぁ。一応これは完全な方法ではある、と思う。</p>\n<p>とりあえず、がんばってコメントしたので読んでくれ。頼む。</p>\n<p><a href=\"https://github.com/crystal-lang/crystal/issues/9016#issuecomment-612850172\" class=\"embedly-card\">https://github.com/crystal-lang/crystal/issues/9016#issuecomment-612850172</a></p>\n<h2>シャニマス</h2>\n<p>アイドルロードが実装された。<br>\nミッション確認したけど、これ結構大変だぞ‥‥。<br>\n思い出5はそこそこ運ゲーだし、営業20回も結構かかる気がする。<br>\n全部やらなくてもSSRにはなるっぽいから、とりあえずそこが目標かな。</p>\n<p>と思ったけど、一回プロデュースしたら11個マス進めた。<br>\nSSRまでなら案外楽にやれるかもしれない。</p>","fields":{"date":"2020-04-13"},"frontmatter":{"title":"アイドルロードが実装された"},"excerpt":"やったこと Crystal 網羅性チェックのエラー化。 来たわね、という感じ。どうなるんだろう‥‥。 完全に話が付いてる感じでもないと思うんだよな。 https://github.com/crystal-lang/crystal/pull/9045 RegexLiteral#t…"},"prev":{"fields":{"date":"2020-04-14","slug":"/post/2020-04-14-diary/"},"frontmatter":{"title":"疲れていた"}},"next":{"fields":{"date":"2020-04-12","slug":"/post/2020-04-12-diary/"},"frontmatter":{"title":"市川雛菜をプロデュースした"}}},"pageContext":{"slug":"/post/2020-04-13-diary/","prevSlug":"/post/2020-04-14-diary/","nextSlug":"/post/2020-04-12-diary/"}}}