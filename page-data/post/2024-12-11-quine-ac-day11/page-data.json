{"componentChunkName":"component---src-templates-post-js","path":"/post/2024-12-11-quine-ac-day11/","result":{"data":{"site":{"siteMetadata":{"title":"℘ make now just"}},"markdownRemark":{"html":"<h1>DAY 11</h1>\n<p>Pythonのシリアライズフォーマットとして有名な<a href=\"https://docs.python.org/3/library/pickle.html\">Pickle</a>ですが、中身はバイトコードインタープリタになっています。<br>\nなぜかモジュールの関数を呼び出したりできるので、わりと好き勝手できます。</p>\n<p>なのでQuineを書いてみました。<br>\n<a href=\"https://gist.github.com/makenowjust/66105ba2f1634808779812d768f6aad7\">適当なRubyスクリプト</a>で生成してます。</p>\n<pre><code class=\"hljs language-console\"><span class=\"hljs-meta prompt_\">$ </span><span class=\"bash\">python3 -mpickletools quine.pkl</span>\n    0: \\x80 PROTO      3\n    2: c    GLOBAL     'os write'\n   12: J    BININT     1\n   17: c    GLOBAL     'builtins getattr'\n   35: c    GLOBAL     'builtins bytes'\n   51: X    BINUNICODE '__mod__'\n   63: \\x86 TUPLE2\n   64: R    REDUCE\n   65: C    SHORT_BINBYTES b'\\x80\\x03cos\\nwrite\\nJ\\x01\\x00\\x00\\x00cbuiltins\\ngetattr\\ncbuiltins\\nbytes\\nX\\x07\\x00\\x00\\x00__mod__\\x86RCK%s2\\x86R\\x86R.'\n  142: 2    DUP\n  143: \\x86 TUPLE2\n  144: R    REDUCE\n  145: \\x86 TUPLE2\n  146: R    REDUCE\n  147: .    STOP\nhighest protocol among opcodes = 3\n<span class=\"hljs-meta prompt_\">$ </span><span class=\"bash\">python3 -mpickle quine.pkl | diff quine.pkl -</span></code></pre>\n<p>VMの命令列を見ると何となく分かるかもしれませんが、<code>bytes.__mod__</code> でQuine相当の文字列を作ったあとに <code>os.write</code> で標準出力に書き込んでいます。<br>\nちなみに <code>python -mpickle</code> で出力したときに同じになるように末尾に出力した長さの数値を付け加えています。</p>","fields":{"date":"2024-12-11"},"frontmatter":{"title":"DAY 11 - Pickle (Quine AC 2024)"},"excerpt":"DAY 11 Pythonのシリアライズフォーマットとして有名なPickleですが、中身はバイトコードインタープリタになっています。 なぜかモジュールの関数を呼び出したりできるので、わりと好き勝手できます。 なのでQuineを書いてみました。 適当なRubyスクリプトで生成して…"},"prev":{"fields":{"date":"2024-12-12","slug":"/post/2024-12-12-quine-ac-day12/"},"frontmatter":{"title":"DAY 12 - LDPL (Quine AC 2024)"}},"next":{"fields":{"date":"2024-12-11","slug":"/post/2024-12-11-diary/"},"frontmatter":{"title":"力尽きてた"}}},"pageContext":{"slug":"/post/2024-12-11-quine-ac-day11/","prevSlug":"/post/2024-12-12-quine-ac-day12/","nextSlug":"/post/2024-12-11-diary/"}},"staticQueryHashes":["1213933803","2548877431"],"slicesMap":{}}