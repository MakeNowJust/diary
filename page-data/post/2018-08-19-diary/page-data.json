{"componentChunkName":"component---src-templates-post-js","path":"/post/2018-08-19-diary/","webpackCompilationHash":"e758372034634a16009d","result":{"data":{"site":{"siteMetadata":{"title":"℘ make now just"}},"markdownRemark":{"html":"<h1>やったこと</h1>\n<h2>ペンギン・ハイウェイを観に行った</h2>\n<p>暁丸と観に行った。</p>\n<p>よくできた映画だと思う。ただ、それでいて面白かったので、そういう意味でとてもよくできた映画だったのだと思う。<br>\n前半に起こった出来事を後半で残さず拾っていっていて、それでいてしっかりとラストを作っているので、見終わったあとの感覚がとても良かった。</p>\n<p>面白い映画で良かったな、と思う。</p>\n<p>ペンギン・ハイウェイを観たあとは二郎に行ってムーンウォークに行った。暁丸といると大体そういうムーブになるっぽい。</p>\n<h2>色々直した</h2>\n<p>Crystalしんどい。</p>\n<p><a href=\"https://github.com/crystal-lang/crystal/pull/6568\" class=\"embedly-card\">https://github.com/crystal-lang/crystal/pull/6568</a></p>\n<p>かなりしんどかった。</p>\n<p><code>\"#{\"foo\"}\"</code>みたいなのがエラーになるのだけど、これをAryはパーサーが文字列補間の情報を保持しないから(この例の場合単一の<code>\"foo\"</code>と同じASTが返る)と予想していたのだけど、実際はフォーマッターがそういう場合をそもそも想定していなかったというのが正しい。<br>\nこの辺はややこしいのでフォーマッターを延々と弄ってる人にしか伝わらない気がするが‥‥。</p>\n<p>ちなみに今のままだとheredocは対応できてなかったりする。おいおい。直すためには二つのことが必要な気がしている。一つは<code>StringLiteral</code>を期待するところで<code>#{</code>が来た場合に<code>delimiter_state</code>を保存するようにすることで、もう一つは<code>has_interpolation</code>が<code>false</code>の場合のために<code>StringLiteral</code>でもheredocをフォーマットできるようにすること。多分この二つでいける。</p>\n<p><a href=\"https://github.com/crystal-lang/crystal/pull/6567\" class=\"embedly-card\">https://github.com/crystal-lang/crystal/pull/6567</a></p>\n<p>こっちはとくに何も考えてない。タイポした。あほか。</p>","fields":{"date":"2018-08-19"},"frontmatter":{"title":"ペンギン・ハイウェイを観に行った"},"excerpt":"やったこと ペンギン・ハイウェイを観に行った 暁丸と観に行った。 よくできた映画だと思う。ただ、それでいて面白かったので、そういう意味でとてもよくできた映画だったのだと思う。 前半に起こった出来事を後半で残さず拾っていっていて、それでいてしっかりとラストを作っているので、見終わ…"},"prev":{"fields":{"date":"2018-08-20","slug":"/post/2018-08-20-diary/"},"frontmatter":{"title":"銀魂2を観た"}},"next":{"fields":{"date":"2018-08-18","slug":"/post/2018-08-18-diary/"},"frontmatter":{"title":"セキュキャン5日目だった"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/post/2018-08-19-diary/","prevSlug":"/post/2018-08-20-diary/","nextSlug":"/post/2018-08-18-diary/"}}}