{"componentChunkName":"component---src-templates-post-js","path":"/post/2019-08-24-diary/","webpackCompilationHash":"1a481b38e3ac9202fdde","result":{"data":{"site":{"siteMetadata":{"title":"℘ make now just"}},"markdownRemark":{"html":"<h1>やったこと</h1>\n<h2>Scala</h2>\n<p>念願の<code>Generic1</code>を実装した。<br>\nわりと動く。例えばscala標準の<code>Either</code>なんかはシンプルなので<code>Functor</code>の導出までできたりする。</p>\n<p>ちなみに<code>Generic</code>で変換できる型は次の通り:</p>\n<ol>\n<li>任意の<code>object X</code>はインスタンス<code>Generic.Aux[X, HNil]</code>が導出される。</li>\n<li>任意の<code>case class X(p1: T1, p2: T2, ..., pn: Tn)</code>は<code>Generic.Aux[X, T1 :*: T2 :*: ... :*: HNil]</code>が導出される。</li>\n<li><code>sealed</code>な型<code>X[A1, A2, ..., An]</code>について、既知の子クラス<code>S1, S2, ..., Sm</code>が<code>X</code>と同じ数の型引数を持っていて、そのままの順番で<code>X</code>に渡しているような場合に、<br>\n(<code>S1[A1, A2, ..., An] extends X[A1, A2, ..., An]</code>となっているということ)<br>\n<code>Generic.Aux[X, S1 :+: S2 :+: ... :+: Sm]</code>が導出される。</li>\n</ol>\n<p>最後のケースが分かりづらいのだけど、そもそもScalaでADTをやるのがしんどい部分があるので仕方ない。</p>\n<p>なおこの定義だと<code>List</code>のインスタンスが導出できない。<br>\nというのも<code>object Nil extends List[Nothing]</code>なので型引数の数が異なってしまっている。<br>\n型引数の数が同じな必要があるのはGADT的なのを弾くためなのだけど、<code>List</code>の場合は型引数が共変なので問題なく扱えるはずではある。<br>\nけど、これを対応すべきかというと微妙なところだよなぁ、という気もする。労力に合わない。普通にこんな風に定義してほしい。</p>\n<pre><code class=\"hljs language-scala\"><span class=\"hljs-keyword\">sealed</span> <span class=\"hljs-keyword\">abstract</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyList</span>[+<span class=\"hljs-type\">A</span>]</span>\n<span class=\"hljs-keyword\">sealed</span> <span class=\"hljs-keyword\">case</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyNil</span>[+<span class=\"hljs-type\">A</span>] <span class=\"hljs-title\">private</span> (<span class=\"hljs-params\"></span>) <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">MyList</span>[<span class=\"hljs-type\">A</span>]</span>\n<span class=\"hljs-class\"><span class=\"hljs-keyword\">object</span> <span class=\"hljs-title\">MyNil</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">MyNil</span>[<span class=\"hljs-type\">Nothing</span>]</span>\n<span class=\"hljs-keyword\">final</span> <span class=\"hljs-keyword\">case</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyCons</span>[+<span class=\"hljs-type\">A</span>](<span class=\"hljs-params\">head: <span class=\"hljs-type\">A</span>, tail: <span class=\"hljs-type\">MyList</span>[<span class=\"hljs-type\">A</span>]</span>) <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">MyList</span>[<span class=\"hljs-type\">A</span>]</span></code></pre>\n<p>この辺は難しいところ。</p>\n<p>catsの型クラスの自動導出をいくつかやってみて感覚を掴もう。</p>\n<h2>ミリ</h2>\n<p>曲は良いのでやる気はあるのだけど時間がない。<br>\nツアー形式でこんなにやってないの久し振りな気がする。</p>\n<h2>シャニ</h2>\n<p>完全に放置していたのでフェスイベントを進める。<br>\n思い出Maxの千雪さんやっぱ強い‥‥。<br>\n完全掌握決めてしまった。</p>\n<p>果穂SSRも引いた。<br>\n運が良い。</p>\n<p><a href=\"https://twitter.com/make_now_just/status/1165062084205277184\" class=\"embedly-card\">https://twitter.com/make_now_just/status/1165062084205277184</a></p>\n<p><a href=\"https://twitter.com/make_now_just/status/1165062262861651968\" class=\"embedly-card\">https://twitter.com/make_now_just/status/1165062262861651968</a></p>\n<p>思い出Lv、アップまで残りどれくらいか表示されるようになったんか。</p>\n<p>というわけで優勝。決勝でVo1位にならなければ余裕なんだよな。<br>\nなにはともあれようやくTrue取れたので満足。<br>\nI love cocking良すぎる‥‥。</p>\n<p><a href=\"https://twitter.com/make_now_just/status/1165081216384503808\" class=\"embedly-card\">https://twitter.com/make_now_just/status/1165081216384503808</a></p>\n<p>甘奈True。<br>\nS4の最後でミスってSランクを逃したアホ。<br>\n七彩難しいよな。</p>\n<p>アルストロメリア全員入れてプロデュースしたので気持ちがいい。</p>\n<p><a href=\"https://twitter.com/make_now_just/status/1165113552228646912\" class=\"embedly-card\">https://twitter.com/make_now_just/status/1165113552228646912</a></p>\n<p>フェスイベントはとりあえずイルミネとアルストロメリアを終了。<br>\n残り面倒というかMe要因がいないのでつらい。</p>","fields":{"date":"2019-08-24"},"frontmatter":{"title":"Generic1を実装した"},"excerpt":"やったこと Scala 念願のGeneric1を実装した。 わりと動く。例えばscala標準のEitherなんかはシンプルなのでFunctorの導出までできたりする。 ちなみにGenericで変換できる型は次の通り: 任意のobject XはインスタンスGeneric.Aux[…"},"prev":{"fields":{"date":"2019-08-25","slug":"/post/2019-08-25-diary/"},"frontmatter":{"title":"シャニしてた"}},"next":{"fields":{"date":"2019-08-23","slug":"/post/2019-08-23-diary/"},"frontmatter":{"title":"heredocを整備した"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/post/2019-08-24-diary/","prevSlug":"/post/2019-08-25-diary/","nextSlug":"/post/2019-08-23-diary/"}}}