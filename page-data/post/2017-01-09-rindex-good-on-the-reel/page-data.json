{"componentChunkName":"component---src-templates-post-js","path":"/post/2017-01-09-rindex-good-on-the-reel/","webpackCompilationHash":"2dfe3c99249213795133","result":{"data":{"site":{"siteMetadata":{"title":"℘ make now just"}},"markdownRemark":{"html":"<script async src=\"//platform.twitter.com/widgets.js\"></script>\n<h1>やったこと</h1>\n<h2><code>String#rindex</code>をラビン-カープ法で実装した</h2>\n<p><code>String#index</code>ができたんだから<code>rindex</code>もできるだろう的な。速くするのが難しい。</p>\n<p>V8の実装を確認したり（後ろから文字列を舐めていって、最初の文字が同じだったら実際の比較を行なうようになってた。<code>String.prototype.indexOf</code>は文字列の長さによって色々な戦略が取られるようになっていた。<code>memchr</code>的なので最初の文字だけ探して、実際の比較を行なって、何度かそれに失敗したらBMH法に移行する、みたいなのが面白かった）、Rustの実装の知見を得たり（Two Way Algorithmというやつらしい。詳細はよく分かっていない）した。</p>\n<p>あと、多分SSE 4.2で追加された文字列処理SIMDを使うのが一番速いんだろうなぁ、とも思うんだけど、それだとUTF-8の文字数カウントできないし‥‥。</p>\n<h2>GOOD ON THE REELを聴いた</h2>\n<p>GOOD ON THE REELというバンドに出会った。</p>\n<blockquote class=\"twitter-tweet\" data-lang=\"ja\"><p lang=\"ja\" dir=\"ltr\">GOOD ON THE REEL / 存在証明書 Music Video <a href=\"https://t.co/nvBcltPR9p\">https://t.co/nvBcltPR9p</a> <a href=\"https://twitter.com/YouTube\">@YouTube</a>さんから</p>&mdash; さっき作った (@make_now_just) <a href=\"https://twitter.com/make_now_just/status/818449277315739649\">2017年1月9日</a></blockquote>\n<p>どうして出会ったのかはよく覚えていない。なんかツイートで流れてきたような気がする。</p>\n<p>ツイートは「存在証明書」だけど「素晴らしき今日の始まり」とか「雨天決行」とか、かなり良い。</p>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/0hazuIKucbo\" frameborder=\"0\" allowfullscreen></iframe>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/TgwZ7xveZls\" frameborder=\"0\" allowfullscreen></iframe>\n<p>もっと色々なバンドを知っていきたい。</p>","fields":{"date":"2017-01-09"},"frontmatter":{"title":"String#rindexをラビン-カープ法で実装したり、GOOD ON THE REELを聴いたり"},"excerpt":"やったこと String#rindexをラビン-カープ法で実装した String#indexができたんだからrindexもできるだろう的な。速くするのが難しい。 V8の実装を確認したり（後ろから文字列を舐めていって、最初の文字が同じだったら実際の比較を行なうようになってた。St…"},"prev":{"fields":{"date":"2017-01-10","slug":"/post/2017-01-10-hazy-happy-birthday/"},"frontmatter":{"title":"Hazy氏の誕生日だったのでDVDと干し芋を贈り付けた"}},"next":{"fields":{"date":"2017-01-08","slug":"/post/2017-01-08-kizumonogatari/"},"frontmatter":{"title":"傷物語Ⅲを観た"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/post/2017-01-09-rindex-good-on-the-reel/","prevSlug":"/post/2017-01-10-hazy-happy-birthday/","nextSlug":"/post/2017-01-08-kizumonogatari/"}}}