---
title: Crystalに2つくらいPull Requestを出した
---

# やったこと

## md.htmlのバージョンを表示するようにした

単体でスクリプトを配布するならバージョン表示が欲しいなぁ、と思ったので。

ついでにreadme.mdのバージョンをチェックするテストを仕込んだ。

## Crystalに2つくらいPull Requestを出した

https://github.com/crystal-lang/crystal/pull/7207

`spec`の`it`と`pending`がネストしてるときにエラーになるようにした。

実装方法は`Scope`というモジュールに`it`と`pending`を呼び出したらエラーになるマクロを定義して`with Scope yield`した。

この方法だとコンパイル時にエラーを検知できて便利なんだけど、一方で`with ... yield`使うのどうなの？　とか、`it`がスコープから直接呼び出されてない場合検出できないのが問題になる。

色々あってランタイムのチェックにしようという気持ちになった。コンセプトは悪くないと思うんだけど、現実はかくも難しい‥‥。

https://github.com/crystal-lang/crystal/pull/7208

`require`中の通常の(コンパイラ関連でない)エラーが、なぜかコンパイラのエラーにラップされるので、スタックトレースふぁ出なくて不便だったのを直した。

これは特に文句もなくマージされると思う。
と思ったら寝る前にマージされた。早い。

個人的には、一応Aryに意図を訊ねた方が良かったと思うんだけど‥‥。

## Crystal Advent Calendarの20日目を書いた

https://qiita.com/make_now_just/items/8402282fb5cb420ddf06

しかし書いた側から意見を変える人の鑑。
真似するなよ。

## 今週のもぐキチ

シュークリーム作ってた。

完全に原優子さんに惚れた。拓海のファンになります。

とりあえずWILD WIND GIRL買います。
