---
title: ScalaのFutureなんも分からん
---

# やったこと

## プリコネ

キャルちゃんの誕生日。
おめでとう！

あと勢いで回したガチャ結果。
新規星3だが‥‥。

<https://twitter.com/make_now_just/status/1301095037371953153>

クレープ屋のお姉さんは出ません‥‥。プリフェスとは。

## Scala

`Cogen`を`Gen[R]`から`Gen[T :=> Option[R]]`を返す関数のみを要求するようにすることで、関数を引数に取る関数のshrinkも出来るようになった。
この実装による各`Cogen`の定義はかなり綺麗で、よくできているのではないかと思う。
これは割と発見だと思うのでちゃんとまとめたい。

あと`Property`を実装したのでProperty Based Testingライブラリらしくなった。
むしろ今まで無かったのか、という気もしなくないが。

タイムアウトの実装のために`Future`を使ったのだけど、途中から全く動かなくなって何が起こったのかと思ったが、無限ループに入ったスレッドが終了せず残って、スレッドプールを喰い尽くしていたらしい。
sbtを再起動すればいいのだけど、どうにかしたいところ。

Scalaの`Future`なんも分からん。
