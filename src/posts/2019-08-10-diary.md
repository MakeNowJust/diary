---
title: PartialFunを実装した
---

# やったこと

## ジョジョ5部

面白いけど4部の方が好き、というか、4部は個人的に好きな感じが強くて、5部は単純に面白いって感じがする。

5部はストーリーの作りが面白いから次が気になるんだな。
なんか4部のカウンターなのか無駄に派手にしようとしてる気がする。

## シャニマス

SSRあさひ。
イベントやっていかなきゃ‥‥。

あとなんか社長の指令3が終わってた。
Πタッチコミュだっけ？
完全に忘れてたな。

https://twitter.com/make_now_just/status/1160099901218230273

灯織。
これで前イベントは全部終わったはず。
長かったぜ。

このTrueコミュほんとずるい。

https://twitter.com/make_now_just/status/1160124157142503425

灯織(本日2度目)。
コミュ消化するぞ、という気持ちでコミュが全部解放されてないのを中心にViプロデュース。
あと灯織の親愛度上げ。

16%で2階も失敗したので悲しみしかない。
とりあえずWING優勝はしたけどAランクいけなかったな‥‥。

https://twitter.com/make_now_just/status/1160161233015676929

## Scala

関数のshrinkの実装を可能な限りlazyにしてみたら割と動くようになった。
元が無限サイズの関数である以上、できる`PartialFun`のインスタンスも無限の大きさになりうるので、可能な限り評価を遅延させていかないと問題になるのだと思う。

QuickCheckのドキュメントにあった`String => Boolean`の例とか、論文に書いてあった`fold`の例とか、あと`StateT`の`Alternative`のインスタンスが内側のモナドが`Option`のときに右分配束が成り立たないのをshrinkできたのでそこそこ満足してる。

それとScalapropsの`Boolean`に対する`Shrink`の実装が間違ってて普通に無限ループする気がするので直したい。

その他作業メモとして、scalapropsの`func`ブランチを動かそうとしたら、そのままだとsbtのバージョンが悪いのか無理だったので、sbtのバージョンを`0.13.18`に上げた(`project/build.properties`を編集した)ら動くようになった。
なんなのか。
